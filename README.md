## Задача-управления-в-нечётких-условиях
## Введение
Далеко не всегда в ходе решения прикладных задач математикам приходится работать с точными данными, выраженными абсолютными величинами, такими как 12 км/ч, 50°C и так далее. В обычной жизни  люди чаще всего оперируют неточной и субъективной информацией, используя различные слова для выражения своего восприятия, например:  “довольно медленно”, “очень горячо”, “немного ветренно”. И, если в диалоге такое представление данных не вызывает проблем для восприятия, то как использовать такой тип информации при конструировании математических моделей? Ответ на этот вопрос даёт теория нечетких множеств. Этот раздел математики помогает формализовывать и обрабатывать “субъективные понятия”.        
В данной работе представлена модель нечёткого вывода, построенная с использованием именно этой теории.



## 1. Цели и задачи
Целью данной работы является создание программной реализации системы нечёткого вывода для решения задачи управления. Для её достижения были поставлены следующие задачи:
1) Ознакомиться с основными понятиями нечётких множеств и способами их задания.
2) Ознакомиться с основными типами функций принадлежности и методами их построения.
3) Изучить операции над нечёткими множествами и понятия нечётких отношений.
4) Изучить основные этапы нечёткого вывода.
5) Придумать задачу управления. 
6) Построить собственную систему нечёткого вывода для решения выбранной задачи.
7) Провести нечеткий вывод на нескольких наборах входных данных.
8) Сделать программную реализацию.



## 2. Обзор
# 2.1 Существующие алгоритмы нечёткого вывода
Системы нечеткого вывода предназначены для преобразования значений входных переменных процесса управления в выходные переменные на основе использования нечетких правил продукций. Для этого системы нечеткого вывода должны содержать базу правил нечетких продукций и реализовывать нечеткий вывод заключений на основе посылок или условий, представленных в форме нечетких лингвистических высказываний: ЕСЛИ «Условие_1» ТО «Заключение_1» 
Основные этапы нечёткого вывода:
1) Формирование базы правил
2) Фаззификация входных переменных 
3) Агрегирование подусловий
4) Активизация подзаключений
5) Построение функций принадлежности выходных переменных
6) Дефаззификация выходных переменных

Алгоритм нечеткого вывода - это последовательность действий, выполняемых для получения чётких значений выходных переменных при заданных чётких значениях входных переменных. Алгоритмы нечеткого вывода различают главным образом видом используемых правил логических операций и разновидностью метода дефаззификации, то есть различия между алгоритмами выражается в правилах нечёткой продукции и способах получения результатов на этапах 4,5 и 6 схемы нечёткого вывода, при этом 1, 2 и 3 этапы выполняются для всех существующих алгоритмов одинаково.
На 1 этапе создаётся множество правил нечетких продукций, согласованных относительно используемых в них лингвистических переменных.
На 2 этапе происходит нахождение значений функций принадлежности нечетких множеств (термов) на основе обычных (не нечётких) исходных данных. Фаззификацию еще называют введением нечеткости.
3 этап – Агрегирование - является процедурой определения степени истинности условий по каждому из правил системы нечеткого вывода.
Существует 3 наиболее распространённых алгоритма нечёткого вывода:
1) Алгоритм Ларсена - активизация подзаключений осуществляется путём произведения значений функции принадлежности соответствующего терма выходной переменной и степени активизации правила.
2) Алгоритм Мамдани - 4 этап осуществляется по формуле взятия минимума между значением функции принадлежности соответствующего терма выходной переменной и степенью истинности подзаключений каждого из правил, входящих в рассматриваемую базу правил. Для дефаззификации выходных переменных используется метод центра тяжести или метод центра площади.
3) Алгоритм Сугено отличается от остальных тем, что использует особый набор правил нечёткой продукции:
ПРАВИЛО: если a есть X и b есть Y, то p = ax+by, где a, b- входные параметры,  x и y-некоторые весовые коэффициенты.
Активизация подзаключений происходит так же как в алгоритме Мамдани, дефаззификация производится путём вычисления центра тяжести для дискретных множеств.
# 2.2 Язык программирования
Язык Си универсален и удобен и для написания прикладных программ, и для системного программирования. Среди его преимуществ следует отметить переносимость программ на компьютеры различной архитектуры и из одной операционной системы в другую, лаконичность записи алгоритмов, логическую стройность программ, а также возможность получить программный код, сравнимый по скорости выполнения с программами, написанными на языке ассемблера.



## 3. Постановка задачи
Для выполнения работы была поставлена задача построить свою систему нечеткого вывода для решения какой-либо задачи управления, не менее чем с 2 входными переменными.
Мною была придумана задача изменения положения педали тормоза автомобиля для предотвращения столкновения с препятствием в зависимости от скорости машины и расстояния до преграды. Общий ход педали-90 градусов, начальное положение - 45 градусов относительно пола. Скорость не может быть ниже 0 километра в час и не превышает 150 километров в час. Расстояние принимает значение не менее 10 метров и не более 60 метров. Имеем 2 входные лингвистические переменные - расстояние в метрах и скорость в км/ч, и одну выходную переменную - поворот педали тормоза (на угол от -45° до 45° градусов относительно начального положения).



## 4. Ход работы
# 4.1 Основные понятия нечетких множеств
Для того чтобы перейти к выполнению работы, необходимо ознакомиться с понятием нечёткого множества и операций над ним, изучить типы функций принадлежности, ознакомиться с понятиями нечётких отношений, лингвистических переменных, систем нечётких продукций, алгоритмов нечёткого вывода и изучить основные этапы нечёткого вывода, после чего приступить к программной реализации.

# 4.2 Функции принадлежности термов
Необходимо создать функцию, которая будет значению входных параметров сопоставлять степени истинности утверждений, касающихся соответствующих термов. Степень истинности - значение от 0 до 1. Для их создания были реализованы массивы определённого размера, номер элемента массива соответствовал одному из целочисленных возможных значений входной переменной, а сам элемент содержал степень истинности этого значения. Значения от первого элемента массива до центрального увеличиваются с шагом, равным 2/(max-min), где min и max-границы терма. Значения элементов идущих после центра массива и до его конца уменьшаются с тем же шагом. Первый и последний элементы массива имеют значение, равное 0. Если входная переменная находится вне заданной области определения задачи, то программа уведомляет об этом пользователя и прекращает работу.
Функция создаёт массив, значения которого симметричны относительно центрального элемента массива, имеющего степень истинности 1.               С помощью созданной функции были созданы 6 массивов для термов лингвистических переменных, обозначенных через личностное восприятие скорости и расстояния: 
Для расстояния:
1) short distance(10, 24)
2) average distance(21, 39)
3) long distance(37, 60)
Для скорости: 
1) low speed(0, 28)
2) normal speed(25, 75)
3) high speed(75, 150)
Для каждого из этих термов были определены диапазоны значений – носители соответствующих им множеств. Например: low speed (0, 28) – Значение для скорости от 0 км/ч до 28 км/ч, степень истинности принимает свое максимальное значение в 14 км/ч. Пары: ”номер элемента-значение элемента” этого массива можно представить в виде треугольного симметричного графика.

Фаззификация входных переменных происходит путём соотношения двух переменных к двум подходящим термам. Если значение переменной попадает под диапазон двух термов, выбирается тот, для которого степень истинности входного параметра больше. В случае, если степень истинности переменной одинаково для обоих термов, предпочтение отдаётся терму, находящемуся “левее” на универсуме значений входной переменной.

# 4.3 База правил нечеткого вывода
Необходимо создать базу правил, покрывающих все возможные значения входных переменных из их области определения. Для придуманной задачи были реализованы 9 правил нечёткого вывода с помощью уже созданной функции принадлежности. 
1) lightly press
2) press
3) hard press
4) press a little
5) do nothing
6) release a little
7) lightly release
8) release
9) hard release
После фаззификации входные переменные соотносятся с двумя термами, на их основе выбирается одно правило из базы, через которое будет проводиться нечёткий вывод.
 
# 4.4 Получение управляющего воздействия
После соотношения входных переменных с определёнными термами и  получения степеней истинности, производится определение правила для нечёткого вывода - оно является выходным массивом. Агрегирование происходит следующим образом: берётся минимум между степенями истинности входных параметров и берётся как ограничение “высоты” для правила вывода, тем самым пары: ”номер элемента-значение элемента” выходного массива можно представить в виде трапециевидного графика.
 

# 4.5 Вывод
Дефаззификация происходит следующим образом: в выходном массиве, в зависимости от расположения параметра (степень истинности которого взята за минимум) относительно центра массива (терма, к которому относится этот параметр), берётся либо левый, либо правый  максимум, а также номер элемента массива, соответствующего выбранному максимуму, и с помощью функции, сопоставляющей каждому правилу из базы определённое целочисленное значение, для каждого правила разное, выбранный номер максимума и полученное значение складываются, образуя выходную переменную. Если значение соответствующее правилу отрицательно, то номер элемента берётся с отрицательным знаком.

## Заключение
В данной работе были получены следующие результаты:
1) Изучены основные понятия теории нечетких множеств и отношений.
2) Построена система нечеткого вывода для решения задачи управления.
3) Проведён нечеткий вывод на нескольких наборах входных данных.
4) Сделана программная реализация на языке С.
